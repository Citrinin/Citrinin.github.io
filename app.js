!function e(t,n,r){function a(i,s){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(o)return o(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return a(n||e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("../utils/request"),o=(r=a,r&&r.__esModule?r:{default:r});var i="AIzaSyB2D-Cmek8ifPd0bHOFzKsdFTofnXBWoIE";n.default=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventBus=t,this.eventBus.on("map:clicked",function(e){n.getPlaceName(e.lat,e.lng).then(function(t){n.eventBus.trigger("google:cityFound",t,e)},function(t){var r=prompt("Неизвестное место. Введите название","HollyWood");r&&n.eventBus.trigger("google:cityFound",r,e)})}),this.getLatLng=function(e){return(0,o.default)("https://maps.googleapis.com/maps/api/geocode/json?address="+e+"&key="+i).then(function(e){return e.results[0].geometry.location})},this.getPlaceName=function(e,t){return(0,o.default)("https://maps.googleapis.com/maps/api/geocode/json?latlng="+e+","+t+"&result_type=locality&language=ru&key="+i).then(function(e){return e.results[0].address_components[0].short_name})}}},{"../utils/request":11}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("../utils/lsStorage"),i=(r=o,r&&r.__esModule?r:{default:r});var s=function(){function e(t,n,r,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxItemAmount=n||0,this.allowRemove=t,this.items={},this.storageName=r,this.htmlElement=a,this.eventBus=o,this.init(),"Favorites"===this.storageName&&this.addRemoval()}return a(e,[{key:"init",value:function(){var e=this;"Favorites"===this.storageName&&this.eventBus.on("google:cityFound",this.addItem.bind(this)),i.default.getData(this.storageName).then(function(t){e.items=JSON.parse(t)||{},e.render()})}},{key:"render",value:function(){this.htmlElement.innerHTML="";var e=document.createElement("ul");for(var t in this.items){var n=document.createElement("li"),r=document.createElement("a");r.href="Favorites"===this.storageName?"#center="+this.items[t].lat+","+this.items[t].lng:"#city="+t,r.innerHTML=t+(this.allowRemove?'<span class="glyphicon glyphicon-remove cross-align-right"/>':""),n.appendChild(r),e.insertBefore(n,e.firstChild)}this.htmlElement.appendChild(e)}},{key:"addRemoval",value:function(){var e=this;this.allowRemove&&this.htmlElement.addEventListener("click",function(t){if(t.target.matches(".glyphicon-remove")){t.preventDefault();var n=t.target.parentElement.innerText;e.eventBus.trigger("list:removeFav",e.items[n]),delete e.items[n],i.default.setData(e.storageName,JSON.stringify(e.items)),e.render()}})}},{key:"addItem",value:function(e,t){void 0===this.items[e]&&(this.items[e]=t||{},"Favorites"===this.storageName&&this.eventBus.trigger("list:addFav",this.items[e]),0!==this.maxItemAmount&&Object.keys(this.items).length>this.maxItemAmount&&delete this.items[Object.keys(this.items)[0]],this.render(),i.default.setData(this.storageName,JSON.stringify(this.items)))}}]),e}();n.default=s},{"../utils/lsStorage":10}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.htmlElement=t,this.eventBus=n,this.init()}return r(e,[{key:"init",value:function(){var e=this;this.render(),this.htmlElement.addEventListener("keypress",function(t){t.target.matches("input")&&13==t.keyCode&&e.goToCity()}),this.htmlElement.addEventListener("click",function(t){t.target.matches("button")&&e.goToCity()})}},{key:"goToCity",value:function(){""!==this.input.value&&(this.eventBus.trigger("search:city",this.input.value),this.input.value="")}},{key:"render",value:function(){this.htmlElement.innerHTML="",this.input=document.createElement("input"),this.input.className="form-control input__city",this.input.placeholder="city",this.htmlElement.appendChild(this.input);var e=document.createElement("span");e.className="input-group-btn";var t=document.createElement("button");t.className="btn btn-default search button__search_city",t.type="button";var n=document.createElement("span");n.className="glyphicon glyphicon-search",t.appendChild(n),e.appendChild(t),this.htmlElement.appendChild(e)}}]),e}();n.default=a},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(e("../utils/skycons")),o=i(e("../utils/request"));function i(e){return e&&e.__esModule?e:{default:e}}var s="5031e075946739a76f0e37598086d0a3",u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.eventBus=n}return r(e,[{key:"getForecastByLatLng",value:function(e,t,n){var r=this;this.cityName=n,(0,o.default)("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+s+"/"+e+","+t+"?lang=ru&units=si").then(function(e){return e.json()}).then(function(e){r.render(e.daily.data)})}},{key:"getForecastByLatLng",value:function(e,t,n){var r=this;this.cityName=n,(0,o.default)("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/"+s+"/"+e+","+t+"?lang=ru&units=si").then(function(e){r.render(e.daily.data)})}},{key:"render",value:function(e){this.element.innerHTML="";var t=document.createElement("span");t.innerHTML="Place: "+this.cityName,this.element.appendChild(t);var n=document.createElement("table");n.className="weatherTable table";var r=document.createElement("tr"),o=document.createElement("th");o.innerHTML="Date";var i=new Date;r.appendChild(o);for(var s=0;s<7;s++){var u=document.createElement("th");u.innerHTML=i.getDate()+"."+(i.getMonth()+1),r.appendChild(u),i.setDate(i.getDate()+1)}n.appendChild(r),r=document.createElement("tr");var c=document.createElement("th");r.appendChild(c);for(var l=0;l<7;l++){var d=document.createElement("td");d.innerHTML='<canvas class="'+e[l].icon+'" width="30" height="30"></canvas>',r.appendChild(d)}n.appendChild(r),n.appendChild(this.createRow(e,"Day temperature","temperatureHigh")),n.appendChild(this.createRow(e,"Night temperature","temperatureLow")),n.appendChild(this.createRow(e,"Wind speed","windSpeed")),this.element.appendChild(n),(0,a.default)()}},{key:"createRow",value:function(e,t,n){var r=document.createElement("tr"),a=document.createElement("th");a.innerHTML=t,r.appendChild(a);for(var o=0;o<7;o++){var i=document.createElement("td");i.innerHTML=e[o][n],r.appendChild(i)}return r}}]),e}();n.default=u},{"../utils/request":11,"../utils/skycons":13}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("../utils/debounce")),a=o(e("../utils/lsStorage"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=s.getCenter();this.eventBus.trigger("map:moved",t[0],t[1])}var s,u={};function c(e,t,n,r){this.startLat=t,this.startLng=n,this.eventBus=e,this.storageName=r,this.init()}c.prototype.moveTo=function(e,t){s.panTo([+e,+t],{duration:2e3})},c.prototype.init=function(){var e=this;ymaps.ready(function(){e.createMap([e.startLat,e.startLng]),a.default.getData(e.storageName).then(function(e){var t=JSON.parse(e)||{};for(var n in t){var r=new ymaps.Placemark([t[n].lat,t[n].lng],{},{preset:"islands#yellowGlyphIcon",iconGlyph:"star"});u[t[n].lat+","+t[n].lng]=r,s.geoObjects.add(r)}}),e.eventBus.on("list:addFav",function(e){var t=new ymaps.Placemark([e.lat,e.lng],{},{preset:"islands#yellowGlyphIcon",iconGlyph:"star"});u[e.lat+","+e.lng]=t,s.geoObjects.add(t)}),e.eventBus.on("list:removeFav",function(e){s.geoObjects.remove(u[e.lat+","+e.lng]),delete u[e.lat+","+e.lng]})})},c.prototype.createMap=function(e){var t=this;(s=new ymaps.Map("map",{center:[e[0],e[1]],zoom:12,controls:["zoomControl"]},{suppressMapOpenBlock:!0})).events.add("click",function(e){var n=e.get("coords"),r={lat:n[0],lng:n[1]};t.eventBus.trigger("map:clicked",r)}),s.events.add("actionend",(0,r.default)(i,700).bind(this))},c.prototype.getCenter=function(){return s.getCenter()},n.default=c},{"../utils/debounce":8,"../utils/lsStorage":10}],6:[function(e,t,n){"use strict";var r=a(e("./routes"));function a(e){return e&&e.__esModule?e:{default:e}}new(a(e("./utils/router")).default)(r.default)},{"./routes":7,"./utils/router":12}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=d(e("./components/listComponent")),a=d(e("./components/googleSearch")),o=d(e("./components/yandexMap")),i=d(e("./components/weatherForecast")),s=d(e("./utils/eventBus")),u=d(e("./utils/userLocation")),c=d(e("./utils/request")),l=d(e("./components/searchComponent"));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}document.querySelector(".myradio").addEventListener("click",function(e){c.default.type=document.querySelector('input[name="request__option"]:checked').value});var f=void 0,m=void 0,p=void 0,v=void 0,y=void 0,g=document.querySelector("#map"),w=document.querySelector("#weather"),_=[{match:"",onEnter:function(){u.default.then(function(e){window.location.hash="center="+e.latitude+","+e.longitude})}},{match:/city=(.+)/,onEnter:function(e){E()?(v.addItem(decodeURI(e)),m.getLatLng(e).then(function(e){p.moveTo(e.lat,e.lng)})):(L(e),v.addItem(decodeURI(e)),m.getLatLng(e).then(function(e){window.location.hash="center="+e.lat+","+e.lng}))}},{match:/^([+|-]?\d*\.?\d+)\,([+|-]?\d*\.?\d+)/,onEnter:function(e){var t;E()||L.apply(void 0,h(e)),(t=m).getPlaceName.apply(t,h(e)).then(function(t){var n;return(n=y).getForecastByLatLng.apply(n,h(e).concat([t]))}).catch(function(t){var n;return(n=y).getForecastByLatLng.apply(n,h(e).concat(["Unknown place"]))})}},{match:/center=([+|-]?\d*\.?\d+)\,([+|-]?\d*\.?\d+)/,onBeforeEnter:function(e){var t;return E()?(t=p).moveTo.apply(t,h(e)):L.apply(void 0,h(e))}},{match:"author",onEnter:function(){b(),w.hidden="true",document.querySelector(".active").className="",document.querySelector('[href="#author"]').parentElement.className="active",g.innerHTML="<h2>Author - Kate Kuzkina</h2>"}},{match:"about",onEnter:function(){b(),w.hidden="true",document.querySelector(".active").className="",document.querySelector('[href="#about"]').parentElement.className="active",g.innerHTML="<h2>Wezzard is the best weather site ever</h2>"}}];function E(){return!!(v&&m&&p&&y)}function b(){f=null,m=null,p=null,null,v=null,y=null,null}function L(e,t){w.removeAttribute("hidden"),g.innerHTML="",document.querySelector(".active").className="",document.querySelector('li [href="#"]').parentElement.className="active",f=new s.default,m=new a.default(f),Number.isNaN(+e)?m.getLatLng(e).then(function(e){p=new o.default(f,e.lat,e.lng,"Favorites")}):p=new o.default(f,e,t,"Favorites"),new r.default(!0,0,"Favorites",document.querySelector(".favorites__list"),f),v=new r.default(!1,5,"History",document.querySelector(".history__list")),y=new i.default(document.querySelector(".weather__forecast"),f),new l.default(document.querySelector(".input-group"),f),f.on("search:city",function(e){window.location.hash="city="+e}),f.on("map:moved",function(e,t){window.location.hash=e+","+t})}n.default=_},{"./components/googleSearch":1,"./components/listComponent":2,"./components/searchComponent":3,"./components/weatherForecast":4,"./components/yandexMap":5,"./utils/eventBus":9,"./utils/request":11,"./utils/userLocation":14}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.default=function(e,t){var n;return function(){var r=this,a=arguments;clearTimeout(n),n=setTimeout(function(){return e.apply(r,a)},t)}}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(){this.listeners={}}r.prototype.trigger=function(e){for(var t=0;t<(this.listeners[e]||[]).length;t++){var n=this.listeners[e][t];if("function"==typeof n){var r=[].slice.call(arguments,1);n.apply(null,r),-1!==n.toString().indexOf("self.off")&&t--}}},r.prototype.on=function(e,t){this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(t)},r.prototype.off=function(e,t){if(void 0!=this.listeners[e]){var n=this.listeners[e].indexOf(t);this.listeners[e].splice(n,1)}},r.prototype.once=function(e,t){var n=this;n.on(e,function r(){t.apply(null,arguments),n.off(e,r)})},n.default=r},{}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r={getData:function(e){return Promise.resolve(window.localStorage.getItem(e))},setData:function(e,t){return Promise.resolve(window.localStorage.setItem(e,t))}};n.default=r},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){return"XHR"===r.type?(t=e,new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){this.status>=200&&this.status<300?e(JSON.parse(r.response)):n({status:this.status,statusText:r.statusText})},r.onerror=function(){n({status:this.status,statusText:r.statusText})},r.send()})):fetch(e).then(function(e){return e.json()});var t}r.type="XHR";n.default=r},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});function r(e){var t=this;this.routes=e||[],this.currentRoute,this.previousRoute,this.currentParams,this.previousParams,window.addEventListener("hashchange",function(e){t.handler(window.location.hash)}),this.handler(window.location.hash)}r.prototype={handler:function(e){this.previousRoute=this.currentRoute,this.previousParams=this.currentParams,this.currentRoute=this.findNewRoute(e),this.launchHandlers()},findNewRoute:function(e){e=e.slice(1);for(var t=0;t<this.routes.length;t++){var n=this.routes[t];if("string"==typeof n.match&&n.match===e)return this.currentParams="",n;if("function"==typeof n.match&&n.match(e))return this.currentParams="",n;if(n.match instanceof RegExp&&n.match.test(e))return this.currentParams=e.match(n.match)||[],this.currentParams.splice(0,1),n}},launchHandlers:function(){var e=this;Promise.resolve().then(function(){e.previousRoute&&e.previousRoute.onLeave&&e.previousRoute.onLeave(e.previousParams)}).then(function(){e.currentRoute&&e.currentRoute.onBeforeEnter&&e.currentRoute.onBeforeEnter(e.currentParams)}).then(function(){e.currentRoute&&e.currentRoute.onEnter&&e.currentRoute.onEnter(e.currentParams)})}},n.default=r},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=document.querySelectorAll("canvas"),t=0;t<e.length;t++)r.set(e[t],Skycons[e[t].className.toUpperCase().replace(/-/g,"_")])};var r=new Skycons;!function(){for(var e=document.querySelectorAll("canvas"),t=0;t<e.length;t++)r.add(e[t],Skycons[e[t].className.toUpperCase().replace(/-/g,"_")]);r.play()}()},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("./request");var o=(0,(r=a,r&&r.__esModule?r:{default:r}).default)("https://api.userinfo.io/userinfos").then(function(e){return e.position});n.default=o},{"./request":11}]},{},[6]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29tcG9uZW50cy9nb29nbGVTZWFyY2guanMiLCJzcmMvanMvY29tcG9uZW50cy9saXN0Q29tcG9uZW50LmpzIiwic3JjL2pzL2NvbXBvbmVudHMvc2VhcmNoQ29tcG9uZW50LmpzIiwic3JjL2pzL2NvbXBvbmVudHMvd2VhdGhlckZvcmVjYXN0LmpzIiwic3JjL2pzL2NvbXBvbmVudHMveWFuZGV4TWFwLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvcm91dGVzLmpzIiwic3JjL2pzL3V0aWxzL2RlYm91bmNlLmpzIiwic3JjL2pzL3V0aWxzL2V2ZW50QnVzLmpzIiwic3JjL2pzL3V0aWxzL2xzU3RvcmFnZS5qcyIsInNyYy9qcy91dGlscy9yZXF1ZXN0LmpzIiwic3JjL2pzL3V0aWxzL3JvdXRlci5qcyIsInNyYy9qcy91dGlscy9za3ljb25zLmpzIiwic3JjL2pzL3V0aWxzL3VzZXJMb2NhdGlvbi5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsIjEiLCJtb2R1bGUiLCJfcmVxdWVzdCIsIkdPT0dMRV9BUElfS0VZIiwiR29vZ2xlTWFwIiwiZXZlbnRCdXMiLCJ0aGlzIiwib24iLCJvYmoiLCJnZXRQbGFjZU5hbWUiLCJsYXQiLCJsbmciLCJ0aGVuIiwiY2l0eU5hbWUiLCJ0cmlnZ2VyIiwiZXJyIiwicHJvbXB0IiwiZ2V0TGF0TG5nIiwiYWRkciIsImRhdGEiLCJyZXN1bHRzIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsImFkZHJlc3NfY29tcG9uZW50cyIsInNob3J0X25hbWUiLCJfbHNTdG9yYWdlIiwiTGlzdENvbXBvbmVudCIsImFsbG93UmVtb3ZlIiwibWF4SXRlbUFtb3VudCIsInN0b3JhZ2VOYW1lIiwiaHRtbEVsZW1lbnQiLCJpdGVtcyIsImluaXQiLCJhZGRSZW1vdmFsIiwiYWRkSXRlbSIsImJpbmQiLCJnZXREYXRhIiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwicmVuZGVyIiwiaW5uZXJIVE1MIiwidWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJrZXkiLCJsaSIsImhyZWYiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXYiLCJ0YXJnZXQiLCJtYXRjaGVzIiwicHJldmVudERlZmF1bHQiLCJwYXJlbnRFbGVtZW50IiwiaW5uZXJUZXh0IiwiX3RoaXMyIiwic2V0RGF0YSIsInN0cmluZ2lmeSIsInVuZGVmaW5lZCIsIk9iamVjdCIsImtleXMiLCJTZWFyY2hDb21wb25lbnQiLCJldmVudCIsImtleUNvZGUiLCJnb1RvQ2l0eSIsImlucHV0IiwidmFsdWUiLCJjbGFzc05hbWUiLCJwbGFjZWhvbGRlciIsInNwYW4iLCJidG4iLCJ0eXBlIiwic3BhblNlYXJjaCIsIldlYXRoZXJGb3JlY2FzdCIsIl9lbGVtZW50IiwiZWxlbWVudCIsInJlcSIsImpzb24iLCJkYWlseSIsImRhaWx5Rm9yZWNhc3QiLCJoZWFkZXIiLCJ0YWJsZSIsInRyIiwidGhIZWFkZXIiLCJkYXRlIiwiRGF0ZSIsImluZGV4IiwidGgiLCJnZXREYXRlIiwiZ2V0TW9udGgiLCJzZXREYXRlIiwidGRIZWFkZXIiLCJfaW5kZXgiLCJ0ZCIsImljb24iLCJjcmVhdGVSb3ciLCJkZWZhdWx0Iiwic291cmNlIiwicm93SGVhZGVyIiwicm93Q29udGVudCIsImV2SGFuZGxlciIsImNvb3JkcyIsIm15TWFwIiwiZ2V0Q2VudGVyIiwicGxhY2VtYXJrcyIsIllhbmRleE1hcCIsInN0YXJ0TGF0Iiwic3RhcnRMbmciLCJwcm90b3R5cGUiLCJtb3ZlVG8iLCJwYW5UbyIsImR1cmF0aW9uIiwicmVhZHkiLCJjcmVhdGVNYXAiLCJfdGhpcyIsIm15UGxhY2VtYXJrIiwieW1hcHMiLCJQbGFjZW1hcmsiLCJnZW9PYmplY3RzIiwiYWRkIiwicmVtb3ZlIiwiTWFwIiwiZXZlbnRzIiwiZ2V0IiwiX2RlYm91bmNlMiIsIl9yb3V0ZXMyIiwicXVlcnlTZWxlY3RvciIsImdvb2dsZU1hcCIsInlhbmRleE1hcCIsImhpc3RvcnkiLCJ3ZWF0aGVyIiwibWFpbkh0bWwiLCJ3ZWF0aGVySHRtbCIsInJvdXRlcyIsInBvc2l0aW9uIiwiaGFzaCIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiY2l0eSIsImNoZWNrUmVzb3VyY2VzIiwiZGVjb2RlVVJJIiwiY29vcmQiLCJfZ29vZ2xlTWFwIiwiYXBwbHkiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJfd2VhdGhlciIsImdldEZvcmVjYXN0QnlMYXRMbmciLCJjb25jYXQiLCJjYXRjaCIsIl93ZWF0aGVyMiIsIl95YW5kZXhNYXAiLCJjbGVhclJlc291cmNlcyIsImhpZGRlbiIsInJlbW92ZUF0dHJpYnV0ZSIsIl9ldmVudEJ1czIiLCJfZ29vZ2xlU2VhcmNoMiIsIk51bWJlciIsImlzTmFOIiwiX3lhbmRleE1hcDMiLCJfbGlzdENvbXBvbmVudDIiLCJfd2VhdGhlckZvcmVjYXN0MiIsIl9zZWFyY2hDb21wb25lbnQyIiwiZnVuYyIsImRlbGF5IiwidGltZXJJRCIsInNlbGYiLCJwYXJhbXMiLCJhcmd1bWVudHMiLCJFdmVudEJ1cyIsImxpc3RlbmVycyIsImNiIiwic2xpY2UiLCJ0b1N0cmluZyIsImluZGV4T2YiLCJwdXNoIiwib2ZmIiwic3BsaWNlIiwib25jZSIsImZ1bmN0aW9uVG9PZmYiLCJsc1N0b3JhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwicmVxdWVzdCIsInVybCIsInJlamVjdCIsInhociIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsInN0YXR1cyIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsIm9uZXJyb3IiLCJzZW5kIiwiUm91dGVyIiwicm91dGVQYXJhbXMiLCJjdXJyZW50Um91dGUiLCJwcmV2aW91c1JvdXRlIiwiY3VycmVudFBhcmFtcyIsInByZXZpb3VzUGFyYW1zIiwiaGFuZGxlciIsImZpbmROZXdSb3V0ZSIsImxhdW5jaEhhbmRsZXJzIiwibWF0Y2giLCJSZWdFeHAiLCJ0ZXN0Iiwib25MZWF2ZSIsIm9uQmVmb3JlRW50ZXIiLCJvbkVudGVyIiwiaWNvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2V0IiwiU2t5Y29ucyIsInRvVXBwZXJDYXNlIiwicmVwbGFjZSIsInNreWNvbnMiLCJwbGF5Iiwic2V0SWNvbnMiLCJ1c2VyTG9jYXRpb24iXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FBQSxJQUFBSixFQUFBRyxHQUFBLENBQUEsSUFBQUosRUFBQUksR0FBQSxDQUFBLElBQUFFLEVBQUEsbUJBQUFDLFNBQUFBLFFBQUEsSUFBQUYsR0FBQUMsRUFBQSxPQUFBQSxFQUFBRixHQUFBLEdBQUEsR0FBQUksRUFBQSxPQUFBQSxFQUFBSixHQUFBLEdBQUEsSUFBQUssRUFBQSxJQUFBQyxNQUFBLHVCQUFBTixFQUFBLEtBQUEsTUFBQUssRUFBQUUsS0FBQSxtQkFBQUYsRUFBQSxJQUFBRyxFQUFBWCxFQUFBRyxJQUFBUyxZQUFBYixFQUFBSSxHQUFBLEdBQUFVLEtBQUFGLEVBQUFDLFFBQUEsU0FBQWQsR0FBQSxJQUFBRSxFQUFBRCxFQUFBSSxHQUFBLEdBQUFMLEdBQUEsT0FBQUksRUFBQUYsR0FBQUYsSUFBQWEsRUFBQUEsRUFBQUMsUUFBQWQsRUFBQUMsRUFBQUMsRUFBQUMsR0FBQSxPQUFBRCxFQUFBRyxHQUFBUyxRQUFBLElBQUEsSUFBQUwsRUFBQSxtQkFBQUQsU0FBQUEsUUFBQUgsRUFBQSxFQUFBQSxFQUFBRixFQUFBYSxPQUFBWCxJQUFBRCxFQUFBRCxFQUFBRSxJQUFBLE9BQUFELEVBQUEsRUFBQWEsR0FBQSxTQUFBVCxFQUFBVSxFQUFBSixp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RUFBUTdLLFNBQUE4SyxpQkFBWixVQUNTak8sRUFBVCxFQUFnQkEsRUFBSWdPLEVBQXBCek4sT0FBQVAsTUFDSWtJLElBQVk4RixFQUFaaE8sR0FBc0JtTyxRQUFRSCxFQUFBaE8sR0FBQThFLFVBQUFzSixjQUFBQyxRQUFBLEtBQTlCLFNBR0pFLE9BRUpDLDBGQ1hBLE1BQUE5TixFQUFBWCxFQUFBLGFBRUEsSUFBSTBPLEdBQUEsc0NBQUE5SCxTQUFlLHFDQUFBdkYsS0FBa0QsU0FBQU8sVUFBUUEsRUFBUnNILHFCQUd0RHdGIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi4vdXRpbHMvcmVxdWVzdCc7XG5cbmxldCBHT09HTEVfQVBJX0tFWSA9ICdBSXphU3lCMkQtQ21lazhpZlBkMGJIT0Z6S3NkRlRvZm5YQldvSUUnO1xuXG5jbGFzcyBHb29nbGVNYXAge1xuICAgIGNvbnN0cnVjdG9yKGV2ZW50QnVzKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignbWFwOmNsaWNrZWQnLCAob2JqKSA9PiB7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0UGxhY2VOYW1lKG9iai5sYXQsIG9iai5sbmcpXG4gICAgICAgICAgICAgICAgLnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGNpdHlOYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcignZ29vZ2xlOmNpdHlGb3VuZCcsIGNpdHlOYW1lLCBvYmopXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2l0eU5hbWUgPSBwcm9tcHQoJ9Cd0LXQuNC30LLQtdGB0YLQvdC+0LUg0LzQtdGB0YLQvi4g0JLQstC10LTQuNGC0LUg0L3QsNC30LLQsNC90LjQtScsICdIb2xseVdvb2QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaXR5TmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcignZ29vZ2xlOmNpdHlGb3VuZCcsIGNpdHlOYW1lLCBvYmopXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5nZXRMYXRMbmcgPSAoYWRkcikgPT4gcmVxdWVzdChgaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9hZGRyZXNzPSR7YWRkcn0ma2V5PSR7R09PR0xFX0FQSV9LRVl9YClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBkYXRhLnJlc3VsdHNbJzAnXS5nZW9tZXRyeS5sb2NhdGlvbik7XG5cbiAgICAgICAgdGhpcy5nZXRQbGFjZU5hbWUgPSAobGF0LCBsbmcpID0+IHJlcXVlc3QoYGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/bGF0bG5nPSR7bGF0fSwke2xuZ30mcmVzdWx0X3R5cGU9bG9jYWxpdHkmbGFuZ3VhZ2U9cnUma2V5PSR7R09PR0xFX0FQSV9LRVl9YClcbiAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiBkYXRhLnJlc3VsdHNbJzAnXS5hZGRyZXNzX2NvbXBvbmVudHNbMF0uc2hvcnRfbmFtZSk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgR29vZ2xlTWFwOyIsImltcG9ydCBpU3RvcmFnZSBmcm9tIFwiLi4vdXRpbHMvbHNTdG9yYWdlXCI7XG5cbmNsYXNzIExpc3RDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGFsbG93UmVtb3ZlLCBtYXhJdGVtQW1vdW50LCBzdG9yYWdlTmFtZSwgaHRtbEVsZW1lbnQsIGV2ZW50QnVzKSB7XG4gICAgICAgIHRoaXMubWF4SXRlbUFtb3VudCA9IG1heEl0ZW1BbW91bnQgfHwgMDtcbiAgICAgICAgdGhpcy5hbGxvd1JlbW92ZSA9IGFsbG93UmVtb3ZlO1xuICAgICAgICB0aGlzLml0ZW1zID0ge307XG4gICAgICAgIHRoaXMuc3RvcmFnZU5hbWUgPSBzdG9yYWdlTmFtZTtcbiAgICAgICAgdGhpcy5odG1sRWxlbWVudCA9IGh0bWxFbGVtZW50O1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICBpZiAodGhpcy5zdG9yYWdlTmFtZSA9PT0gJ0Zhdm9yaXRlcycpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkUmVtb3ZhbCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3JhZ2VOYW1lID09PSAnRmF2b3JpdGVzJykge1xuICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5vbignZ29vZ2xlOmNpdHlGb3VuZCcsIHRoaXMuYWRkSXRlbS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICBpU3RvcmFnZS5nZXREYXRhKHRoaXMuc3RvcmFnZU5hbWUpXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBKU09OLnBhcnNlKHJlc3VsdCkgfHwge307XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH0pXG5cbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBsZXQgdWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGxldCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXG4gICAgICAgICAgICBhLmhyZWYgPSB0aGlzLnN0b3JhZ2VOYW1lID09PSAnRmF2b3JpdGVzJyA/IGAjY2VudGVyPSR7dGhpcy5pdGVtc1trZXldLmxhdH0sJHt0aGlzLml0ZW1zW2tleV0ubG5nfWAgOiBgI2NpdHk9JHtrZXl9YDtcbiAgICAgICAgICAgIGEuaW5uZXJIVE1MID0ga2V5ICsgKHRoaXMuYWxsb3dSZW1vdmUgPyAnPHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLXJlbW92ZSBjcm9zcy1hbGlnbi1yaWdodFwiLz4nIDogJycpO1xuICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoYSk7XG4gICAgICAgICAgICB1bC5pbnNlcnRCZWZvcmUobGksIHVsLmZpcnN0Q2hpbGQpO1xuXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuYXBwZW5kQ2hpbGQodWwpO1xuICAgIH07XG4gICAgYWRkUmVtb3ZhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dSZW1vdmUpIHtcbiAgICAgICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0Lm1hdGNoZXMoJy5nbHlwaGljb24tcmVtb3ZlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleSA9IGV2LnRhcmdldC5wYXJlbnRFbGVtZW50LmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKCdsaXN0OnJlbW92ZUZhdicsIHRoaXMuaXRlbXNba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGlTdG9yYWdlLnNldERhdGEodGhpcy5zdG9yYWdlTmFtZSwgSlNPTi5zdHJpbmdpZnkodGhpcy5pdGVtcykpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYWRkSXRlbShrZXksIG9iaikge1xuICAgICAgICBpZiAodGhpcy5pdGVtc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zW2tleV0gPSBvYmogfHwge307XG5cbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZU5hbWUgPT09ICdGYXZvcml0ZXMnKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoJ2xpc3Q6YWRkRmF2JywgdGhpcy5pdGVtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhJdGVtQW1vdW50ICE9PSAwICYmIE9iamVjdC5rZXlzKHRoaXMuaXRlbXMpLmxlbmd0aCA+IHRoaXMubWF4SXRlbUFtb3VudCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNbT2JqZWN0LmtleXModGhpcy5pdGVtcylbMF1dO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIGlTdG9yYWdlLnNldERhdGEodGhpcy5zdG9yYWdlTmFtZSwgSlNPTi5zdHJpbmdpZnkodGhpcy5pdGVtcykpO1xuICAgIH07XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGlzdENvbXBvbmVudDsiLCJjbGFzcyBTZWFyY2hDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGh0bWxFbGVtZW50LCBldmVudEJ1cykge1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50ID0gaHRtbEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMgPSBldmVudEJ1cztcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfTtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHRoaXMuaHRtbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQubWF0Y2hlcygnaW5wdXQnKSkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ29Ub0NpdHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0Lm1hdGNoZXMoJ2J1dHRvbicpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nb1RvQ2l0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG4gICAgZ29Ub0NpdHkoKSB7XG4gICAgICAgIGlmICh0aGlzLmlucHV0LnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcignc2VhcmNoOmNpdHknLCB0aGlzLmlucHV0LnZhbHVlKTtcbiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9ICcnO1xuICAgIH07XG4gICAgcmVuZGVyKCkge1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICB0aGlzLmlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdGhpcy5pbnB1dC5jbGFzc05hbWUgPSBcImZvcm0tY29udHJvbCBpbnB1dF9fY2l0eVwiO1xuICAgICAgICB0aGlzLmlucHV0LnBsYWNlaG9sZGVyID0gJ2NpdHknO1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuaW5wdXQpO1xuICAgICAgICB2YXIgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi5jbGFzc05hbWUgPSAnaW5wdXQtZ3JvdXAtYnRuJztcbiAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidG4uY2xhc3NOYW1lID0gJ2J0biBidG4tZGVmYXVsdCBzZWFyY2ggYnV0dG9uX19zZWFyY2hfY2l0eSc7XG4gICAgICAgIGJ0bi50eXBlID0gJ2J1dHRvbic7XG4gICAgICAgIHZhciBzcGFuU2VhcmNoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuU2VhcmNoLmNsYXNzTmFtZSA9ICdnbHlwaGljb24gZ2x5cGhpY29uLXNlYXJjaCc7XG4gICAgICAgIGJ0bi5hcHBlbmRDaGlsZChzcGFuU2VhcmNoKTtcbiAgICAgICAgc3Bhbi5hcHBlbmRDaGlsZChidG4pO1xuICAgICAgICB0aGlzLmh0bWxFbGVtZW50LmFwcGVuZENoaWxkKHNwYW4pO1xuICAgIH1cblxufVxuXG5cblxuZXhwb3J0IGRlZmF1bHQgU2VhcmNoQ29tcG9uZW50OyIsImltcG9ydCB1cGRhdGVJY29ucyBmcm9tICcuLi91dGlscy9za3ljb25zJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJy4uL3V0aWxzL3JlcXVlc3QnO1xudmFyIGtleSA9ICc1MDMxZTA3NTk0NjczOWE3NmYwZTM3NTk4MDg2ZDBhMyc7XG5cbmNsYXNzIFdlYXRoZXJGb3JlY2FzdCB7XG4gICAgY29uc3RydWN0b3IoX2VsZW1lbnQsIGV2ZW50QnVzKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IF9lbGVtZW50O1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gZXZlbnRCdXM7XG4gICAgfTtcbiAgICBnZXRGb3JlY2FzdEJ5TGF0TG5nKGxhdCwgbG5nLCBjaXR5TmFtZSkge1xuICAgICAgICB0aGlzLmNpdHlOYW1lID0gY2l0eU5hbWU7XG4gICAgICAgIHJlcXVlc3QoYGh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vYXBpLmRhcmtza3kubmV0L2ZvcmVjYXN0LyR7a2V5fS8ke2xhdH0sJHtsbmd9P2xhbmc9cnUmdW5pdHM9c2lgKVxuICAgICAgICAgICAgLnRoZW4oKHJlcSkgPT4gcmVxLmpzb24oKSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIocmVzdWx0LmRhaWx5LmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2V0Rm9yZWNhc3RCeUxhdExuZyhsYXQsIGxuZywgY2l0eU5hbWUpIHtcbiAgICAgICAgdGhpcy5jaXR5TmFtZSA9IGNpdHlOYW1lO1xuICAgICAgICByZXF1ZXN0KGBodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwczovL2FwaS5kYXJrc2t5Lm5ldC9mb3JlY2FzdC8ke2tleX0vJHtsYXR9LCR7bG5nfT9sYW5nPXJ1JnVuaXRzPXNpYClcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIocmVzdWx0LmRhaWx5LmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcihkYWlseUZvcmVjYXN0KSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgaGVhZGVyLmlubmVySFRNTCA9IGBQbGFjZTogJHt0aGlzLmNpdHlOYW1lfWA7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICB2YXIgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICB0YWJsZS5jbGFzc05hbWUgPSAnd2VhdGhlclRhYmxlIHRhYmxlJztcbiAgICAgICAgdmFyIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgdmFyIHRoSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgdGhIZWFkZXIuaW5uZXJIVE1MID0gJ0RhdGUnO1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRoSGVhZGVyKTtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDc7IGluZGV4KyspIHtcbiAgICAgICAgICAgIHZhciB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgICAgICB0aC5pbm5lckhUTUwgPSBgJHtkYXRlLmdldERhdGUoKX0uJHtkYXRlLmdldE1vbnRoKCkrMX1gO1xuICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGgpO1xuICAgICAgICAgICAgZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodHIpO1xuXG4gICAgICAgIHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgdmFyIHRkSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRIZWFkZXIpO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNzsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IGA8Y2FudmFzIGNsYXNzPVwiJHtkYWlseUZvcmVjYXN0W2luZGV4XS5pY29ufVwiIHdpZHRoPVwiMzBcIiBoZWlnaHQ9XCIzMFwiPjwvY2FudmFzPmBcbiAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgfVxuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0cik7XG5cbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coZGFpbHlGb3JlY2FzdCwgJ0RheSB0ZW1wZXJhdHVyZScsICd0ZW1wZXJhdHVyZUhpZ2gnKSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlUm93KGRhaWx5Rm9yZWNhc3QsICdOaWdodCB0ZW1wZXJhdHVyZScsICd0ZW1wZXJhdHVyZUxvdycpKTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVSb3coZGFpbHlGb3JlY2FzdCwgJ1dpbmQgc3BlZWQnLCAnd2luZFNwZWVkJykpO1xuXG4gICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG4gICAgICAgIHVwZGF0ZUljb25zKCk7XG4gICAgfVxuXG4gICAgY3JlYXRlUm93KHNvdXJjZSwgcm93SGVhZGVyLCByb3dDb250ZW50KSB7XG4gICAgICAgIHZhciB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIHZhciB0ZEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7XG4gICAgICAgIHRkSGVhZGVyLmlubmVySFRNTCA9IHJvd0hlYWRlcjtcbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGRIZWFkZXIpO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNzsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgIHRkLmlubmVySFRNTCA9IHNvdXJjZVtpbmRleF1bcm93Q29udGVudF07XG4gICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgV2VhdGhlckZvcmVjYXN0OyIsImltcG9ydCBkZWJvdW5jZSBmcm9tICcuLi91dGlscy9kZWJvdW5jZSc7XG5pbXBvcnQgaVN0b3JhZ2UgZnJvbSAnLi4vdXRpbHMvbHNTdG9yYWdlJztcblxuZnVuY3Rpb24gZXZIYW5kbGVyKGV2KSB7XG4gICAgdmFyIGNvb3JkcyA9IG15TWFwLmdldENlbnRlcigpO1xuICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcignbWFwOm1vdmVkJywgY29vcmRzWzBdLCBjb29yZHNbMV0pO1xufVxuXG5cblxudmFyIG15TWFwO1xudmFyIHBsYWNlbWFya3MgPSB7fTtcblxuZnVuY3Rpb24gWWFuZGV4TWFwKGV2ZW50QnVzLCBsYXQsIGxuZywgc3RvcmFnZU5hbWUpIHtcbiAgICB0aGlzLnN0YXJ0TGF0ID0gbGF0O1xuICAgIHRoaXMuc3RhcnRMbmcgPSBsbmc7XG4gICAgdGhpcy5ldmVudEJ1cyA9IGV2ZW50QnVzO1xuICAgIHRoaXMuc3RvcmFnZU5hbWUgPSBzdG9yYWdlTmFtZTtcbiAgICB0aGlzLmluaXQoKTtcblxufTtcblxuWWFuZGV4TWFwLnByb3RvdHlwZS5tb3ZlVG8gPSBmdW5jdGlvbihsYXQsIGxuZykge1xuICAgIG15TWFwLnBhblRvKFsrbGF0LCArbG5nXSwgeyBkdXJhdGlvbjogMjAwMCB9KTtcbn1cblxuWWFuZGV4TWFwLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgeW1hcHMucmVhZHkoKCkgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0ZU1hcChbdGhpcy5zdGFydExhdCwgdGhpcy5zdGFydExuZ10pO1xuXG4gICAgICAgIGlTdG9yYWdlLmdldERhdGEodGhpcy5zdG9yYWdlTmFtZSkudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHZhciBpdGVtcyA9IEpTT04ucGFyc2UoZGF0YSkgfHwge307XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbXlQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFtpdGVtc1trZXldWydsYXQnXSwgaXRlbXNba2V5XVsnbG5nJ11dLCB7fSwge1xuICAgICAgICAgICAgICAgICAgICBwcmVzZXQ6ICdpc2xhbmRzI3llbGxvd0dseXBoSWNvbicsXG4gICAgICAgICAgICAgICAgICAgIGljb25HbHlwaDogJ3N0YXInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcGxhY2VtYXJrc1tgJHtpdGVtc1trZXldWydsYXQnXX0sJHsgaXRlbXNba2V5XVsnbG5nJ119YF0gPSBteVBsYWNlbWFyaztcbiAgICAgICAgICAgICAgICBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcblxuICAgICAgICB0aGlzLmV2ZW50QnVzLm9uKCdsaXN0OmFkZEZhdicsIChjb29yZHMpID0+IHtcbiAgICAgICAgICAgIGxldCBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoW2Nvb3Jkc1snbGF0J10sIGNvb3Jkc1snbG5nJ11dLCB7fSwge1xuICAgICAgICAgICAgICAgIHByZXNldDogJ2lzbGFuZHMjeWVsbG93R2x5cGhJY29uJyxcbiAgICAgICAgICAgICAgICBpY29uR2x5cGg6ICdzdGFyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwbGFjZW1hcmtzW2Ake2Nvb3Jkc1snbGF0J119LCR7Y29vcmRzWydsbmcnXX1gXSA9IG15UGxhY2VtYXJrO1xuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQbGFjZW1hcmspO1xuICAgICAgICB9KVxuXG4gICAgICAgIHRoaXMuZXZlbnRCdXMub24oJ2xpc3Q6cmVtb3ZlRmF2JywgKGNvb3JkcykgPT4ge1xuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5yZW1vdmUocGxhY2VtYXJrc1tgJHtjb29yZHNbJ2xhdCddfSwke2Nvb3Jkc1snbG5nJ119YF0pO1xuICAgICAgICAgICAgZGVsZXRlIHBsYWNlbWFya3NbYCR7Y29vcmRzWydsYXQnXX0sJHtjb29yZHNbJ2xuZyddfWBdO1xuICAgICAgICB9KVxuICAgIH0pO1xuXG59XG5cbllhbmRleE1hcC5wcm90b3R5cGUuY3JlYXRlTWFwID0gZnVuY3Rpb24oY29vcmRzKSB7XG5cbiAgICBteU1hcCA9IG5ldyB5bWFwcy5NYXAoJ21hcCcsIHtcbiAgICAgICAgY2VudGVyOiBbY29vcmRzWzBdLCBjb29yZHNbMV1dLFxuICAgICAgICB6b29tOiAxMixcbiAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnXVxuICAgIH0sIHtcbiAgICAgICAgc3VwcHJlc3NNYXBPcGVuQmxvY2s6IHRydWVcbiAgICB9KTtcblxuICAgIG15TWFwLmV2ZW50cy5hZGQoJ2NsaWNrJywgKGUpID0+IHtcblxuICAgICAgICB2YXIgY29vcmRzID0gZS5nZXQoJ2Nvb3JkcycpO1xuICAgICAgICAvLyB2YXIgbXlQbGFjZW1hcmsgPSBuZXcgeW1hcHMuUGxhY2VtYXJrKFtjb29yZHNbMF0sIGNvb3Jkc1sxXV0sIHt9LCB7XG4gICAgICAgIC8vICAgICBwcmVzZXQ6ICdpc2xhbmRzI3llbGxvd0dseXBoSWNvbicsXG4gICAgICAgIC8vICAgICBpY29uR2x5cGg6ICdzdGFyJ1xuICAgICAgICAvLyB9KTtcblxuICAgICAgICAvLyBteU1hcC5nZW9PYmplY3RzLmFkZChteVBsYWNlbWFyayk7XG4gICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICBsYXQ6IGNvb3Jkc1swXSxcbiAgICAgICAgICAgIGxuZzogY29vcmRzWzFdXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcignbWFwOmNsaWNrZWQnLCBvYmopO1xuICAgIH0pO1xuXG4gICAgbXlNYXAuZXZlbnRzLmFkZCgnYWN0aW9uZW5kJywgZGVib3VuY2UoZXZIYW5kbGVyLCA3MDApLmJpbmQodGhpcykpXG59XG5cbllhbmRleE1hcC5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG15TWFwLmdldENlbnRlcigpO1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IFlhbmRleE1hcDsiLCJpbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnLi91dGlscy9yb3V0ZXInO1xuXG5cbnZhciByb3V0ZXIgPSBuZXcgUm91dGVyKHJvdXRlcyk7IiwiaW1wb3J0IExpc3RDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnRzL2xpc3RDb21wb25lbnQnO1xuaW1wb3J0IEdvb2dsZU1hcCBmcm9tICcuL2NvbXBvbmVudHMvZ29vZ2xlU2VhcmNoJztcbmltcG9ydCBZYW5kZXhNYXAgZnJvbSAnLi9jb21wb25lbnRzL3lhbmRleE1hcCc7XG5pbXBvcnQgV2VhdGhlckZvcmVjYXN0IGZyb20gJy4vY29tcG9uZW50cy93ZWF0aGVyRm9yZWNhc3QnO1xuaW1wb3J0IEV2ZW50QnVzIGZyb20gJy4vdXRpbHMvZXZlbnRCdXMnO1xuaW1wb3J0IHdlYXRoZXJGb3JlY2FzdCBmcm9tICcuL2NvbXBvbmVudHMvd2VhdGhlckZvcmVjYXN0JztcbmltcG9ydCB1c2VyTG9jYXRpb24gZnJvbSAnLi91dGlscy91c2VyTG9jYXRpb24nO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi91dGlscy9yZXF1ZXN0JztcbmltcG9ydCBDaXR5SW5wdXQgZnJvbSAnLi9jb21wb25lbnRzL3NlYXJjaENvbXBvbmVudCc7XG5cbnZhciByYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5teXJhZGlvJyk7XG5yYWRpby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ID0+IHtcbiAgICByZXF1ZXN0LnR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicmVxdWVzdF9fb3B0aW9uXCJdOmNoZWNrZWQnKS52YWx1ZTtcbn0pXG5cbmxldCBldmVudEJ1cztcbmxldCBnb29nbGVNYXA7XG5sZXQgeWFuZGV4TWFwO1xubGV0IGZhdm9yaXRlcztcbmxldCBoaXN0b3J5O1xubGV0IHdlYXRoZXI7XG5sZXQgY2l0eUlucHV0O1xuXG5sZXQgbWFpbkh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWFwJyk7XG5sZXQgd2VhdGhlckh0bWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd2VhdGhlcicpO1xuXG5sZXQgcm91dGVzID0gW3tcbiAgICAgICAgbWF0Y2g6ICcnLFxuICAgICAgICBvbkVudGVyOiAoKSA9PiB7XG4gICAgICAgICAgICB1c2VyTG9jYXRpb25cbiAgICAgICAgICAgICAgICAudGhlbigocG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBgY2VudGVyPSR7cG9zaXRpb24ubGF0aXR1ZGV9LCR7cG9zaXRpb24ubG9uZ2l0dWRlfWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICBtYXRjaDogL2NpdHk9KC4rKS8sXG4gICAgICAgIG9uRW50ZXI6IChjaXR5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNoZWNrUmVzb3VyY2VzKCkpIHtcbiAgICAgICAgICAgICAgICBpbml0KGNpdHkpO1xuICAgICAgICAgICAgICAgIGhpc3RvcnkuYWRkSXRlbShkZWNvZGVVUkkoY2l0eSkpO1xuICAgICAgICAgICAgICAgIGdvb2dsZU1hcC5nZXRMYXRMbmcoY2l0eSkudGhlbihkYXRhID0+IHtcblxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGBjZW50ZXI9JHtkYXRhWydsYXQnXX0sJHtkYXRhWydsbmcnXX1gO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhpc3RvcnkuYWRkSXRlbShkZWNvZGVVUkkoY2l0eSkpO1xuICAgICAgICAgICAgICAgIGdvb2dsZU1hcC5nZXRMYXRMbmcoY2l0eSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlhbmRleE1hcC5tb3ZlVG8oZGF0YVsnbGF0J10sIGRhdGFbJ2xuZyddKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfSwge1xuXG4gICAgICAgIG1hdGNoOiAvXihbK3wtXT9cXGQqXFwuP1xcZCspXFwsKFsrfC1dP1xcZCpcXC4/XFxkKykvLFxuICAgICAgICBvbkVudGVyOiAoY29vcmQpID0+IHtcblxuICAgICAgICAgICAgaWYgKCFjaGVja1Jlc291cmNlcygpKSB7XG4gICAgICAgICAgICAgICAgaW5pdCguLi5jb29yZCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGdvb2dsZU1hcC5nZXRQbGFjZU5hbWUoLi4uY29vcmQpLnRoZW4oXG4gICAgICAgICAgICAgICAgY2l0eU5hbWUgPT4gd2VhdGhlci5nZXRGb3JlY2FzdEJ5TGF0TG5nKC4uLmNvb3JkLCBjaXR5TmFtZSlcbiAgICAgICAgICAgICkuY2F0Y2goZXJyID0+IHdlYXRoZXIuZ2V0Rm9yZWNhc3RCeUxhdExuZyguLi5jb29yZCwgJ1Vua25vd24gcGxhY2UnKSlcblxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBtYXRjaDogL2NlbnRlcj0oWyt8LV0/XFxkKlxcLj9cXGQrKVxcLChbK3wtXT9cXGQqXFwuP1xcZCspLyxcbiAgICAgICAgb25CZWZvcmVFbnRlcjogKGNvb3JkKSA9PiBjaGVja1Jlc291cmNlcygpID8geWFuZGV4TWFwLm1vdmVUbyguLi5jb29yZCkgOiBpbml0KC4uLmNvb3JkKVxuICAgIH0sXG5cbiAgICB7XG4gICAgICAgIG1hdGNoOiAnYXV0aG9yJyxcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJSZXNvdXJjZXMoKTtcbiAgICAgICAgICAgIHdlYXRoZXJIdG1sLmhpZGRlbiA9ICd0cnVlJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tocmVmPVwiI2F1dGhvclwiXScpLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XG4gICAgICAgICAgICBtYWluSHRtbC5pbm5lckhUTUwgPSBcIjxoMj5BdXRob3IgLSBLYXRlIEt1emtpbmE8L2gyPlwiO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBtYXRjaDogJ2Fib3V0JyxcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xuICAgICAgICAgICAgY2xlYXJSZXNvdXJjZXMoKTtcbiAgICAgICAgICAgIHdlYXRoZXJIdG1sLmhpZGRlbiA9ICd0cnVlJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKS5jbGFzc05hbWUgPSAnJztcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tocmVmPVwiI2Fib3V0XCJdJykucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPSAnYWN0aXZlJztcbiAgICAgICAgICAgIG1haW5IdG1sLmlubmVySFRNTCA9IFwiPGgyPldlenphcmQgaXMgdGhlIGJlc3Qgd2VhdGhlciBzaXRlIGV2ZXI8L2gyPlwiO1xuICAgICAgICB9XG4gICAgfVxuXG5dO1xuXG5mdW5jdGlvbiBjaGVja1Jlc291cmNlcygpIHtcbiAgICByZXR1cm4gaGlzdG9yeSAmJiBnb29nbGVNYXAgJiYgeWFuZGV4TWFwICYmIHdlYXRoZXIgPyB0cnVlIDogZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNsZWFyUmVzb3VyY2VzKCkge1xuXG4gICAgZXZlbnRCdXMgPSBudWxsO1xuICAgIGdvb2dsZU1hcCA9IG51bGw7XG4gICAgeWFuZGV4TWFwID0gbnVsbDtcbiAgICBmYXZvcml0ZXMgPSBudWxsO1xuICAgIGhpc3RvcnkgPSBudWxsO1xuICAgIHdlYXRoZXIgPSBudWxsO1xuICAgIGNpdHlJbnB1dCA9IG51bGw7XG5cbn1cblxuZnVuY3Rpb24gaW5pdChsYXQsIGxuZykge1xuICAgIHdlYXRoZXJIdG1sLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgbWFpbkh0bWwuaW5uZXJIVE1MID0gJyc7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpLmNsYXNzTmFtZSA9ICcnO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpIFtocmVmPVwiI1wiXScpLnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID0gJ2FjdGl2ZSc7XG4gICAgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcbiAgICBnb29nbGVNYXAgPSBuZXcgR29vZ2xlTWFwKGV2ZW50QnVzKTtcbiAgICBpZiAoTnVtYmVyLmlzTmFOKCtsYXQpKSB7XG4gICAgICAgIGdvb2dsZU1hcC5nZXRMYXRMbmcobGF0KVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgICB5YW5kZXhNYXAgPSBuZXcgWWFuZGV4TWFwKGV2ZW50QnVzLCBkYXRhWydsYXQnXSwgZGF0YVsnbG5nJ10sICdGYXZvcml0ZXMnKTtcbiAgICAgICAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgeWFuZGV4TWFwID0gbmV3IFlhbmRleE1hcChldmVudEJ1cywgbGF0LCBsbmcsICdGYXZvcml0ZXMnKTtcbiAgICB9XG5cblxuICAgIGZhdm9yaXRlcyA9IG5ldyBMaXN0Q29tcG9uZW50KHRydWUsIDAsICdGYXZvcml0ZXMnLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmF2b3JpdGVzX19saXN0JyksIGV2ZW50QnVzKTtcbiAgICBoaXN0b3J5ID0gbmV3IExpc3RDb21wb25lbnQoZmFsc2UsIDUsICdIaXN0b3J5JywgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhpc3RvcnlfX2xpc3QnKSk7XG4gICAgd2VhdGhlciA9IG5ldyBXZWF0aGVyRm9yZWNhc3QoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXJfX2ZvcmVjYXN0JyksIGV2ZW50QnVzKTtcbiAgICBjaXR5SW5wdXQgPSBuZXcgQ2l0eUlucHV0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC1ncm91cCcpLCBldmVudEJ1cyk7XG5cblxuICAgIGV2ZW50QnVzLm9uKCdzZWFyY2g6Y2l0eScsIChjaXR5KSA9PiB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gYGNpdHk9JHtjaXR5fWA7XG4gICAgfSk7XG5cbiAgICBldmVudEJ1cy5vbignbWFwOm1vdmVkJywgKGxhdCwgbG5nKSA9PiB7XG5cbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBgJHtsYXR9LCR7bG5nfWA7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlczsiLCJmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCBkZWxheSkge1xuICAgIHZhciB0aW1lcklEO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgcGFyYW1zID0gYXJndW1lbnRzO1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZXJJRCk7XG4gICAgICAgIHRpbWVySUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoc2VsZiwgcGFyYW1zKTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZGVib3VuY2U7IiwiLyoqXG4gKtCk0YPQvdC60YbQuNGPIEV2ZW50QnVzINC00LvRjyDQvtCx0LzQtdC90LAg0YHQvtC+0LHRidC10L3QuNGP0LzQuFxuICovXG5mdW5jdGlvbiBFdmVudEJ1cygpIHtcbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xufVxuXG4vKipcbiAq0KTRg9C90LrRhtC40Y8gdHJpZ2dlciDQtNC70Y8g0LLRi9C30L7QstCwINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDRgdC+0LHRi9GC0LjRj1xuICpAcGFyYW0gZXZlbnQgICDRgdC+0LHRi9GC0LjQtSwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQutC+0YLQvtGA0L7Qs9C+INC90LXQvtCx0YXQvtC00LjQvNC+INCy0YvQt9Cy0LDRgtGMXG4gKi9cbkV2ZW50QnVzLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKHRoaXMubGlzdGVuZXJzW2V2ZW50XSB8fCBbXSkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGNiID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRdW2ldO1xuICAgICAgICBpZiAodHlwZW9mKGNiKSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgY2IuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICAgICAgICAgIGlmIChjYi50b1N0cmluZygpLmluZGV4T2YoJ3NlbGYub2ZmJykgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAq0KTRg9C90LrRhtC40Y8gb24g0LTQu9GPINC00L7QsdCw0LLQu9C10L3QuNGPINC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDRgdC+0LHRi9GC0LjRj1xuICpAcGFyYW0gZXZlbnQgICDRgdC+0LHRi9GC0LjQtSwg0L7QsdGA0LDQsdC+0YLRh9C40LrQuCDQutC+0YLQvtGA0L7Qs9C+INC90LXQvtCx0YXQvtC00LjQvNC+INC00L7QsdCw0LLQuNGC0YxcbiAqQHBhcmFtIGNiICAgICAg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gZXZlbnRcbiAqL1xuRXZlbnRCdXMucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXZlbnQsIGNiKSB7XG5cbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0gPSAodGhpcy5saXN0ZW5lcnNbZXZlbnRdIHx8IFtdKTtcbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChjYik7XG59XG5cbi8qKlxuICrQpNGD0L3QutGG0LjRjyBvbiDQtNC70Y8g0YPQtNCw0LvQtdC90LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0YHQvtCx0YvRgtC40Y9cbiAqQHBhcmFtIGV2ZW50ICAg0YHQvtCx0YvRgtC40LUsINC+0LHRgNCw0LHQvtGC0YfQuNC60Lgg0LrQvtGC0L7RgNC+0LPQviDQvdC10L7QsdGF0L7QtNC40LzQviDRg9C00LDQu9C40YLRjFxuICpAcGFyYW0gY2IgICAgICDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBldmVudFxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24oZXZlbnQsIGNiKSB7XG5cbiAgICBpZiAodGhpcy5saXN0ZW5lcnNbZXZlbnRdID09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBwb3NpdGlvbiA9IHRoaXMubGlzdGVuZXJzW2V2ZW50XS5pbmRleE9mKGNiKTtcbiAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0uc3BsaWNlKHBvc2l0aW9uLCAxKTtcbn1cblxuLyoqXG4gKtCk0YPQvdC60YbQuNGPIG9uINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutCwINGB0L7QsdGL0YLQuNGPLCDQutC+0YLQvtGA0YvQuSDRgdGA0LDQsdC+0YLQsNC10YIgMSDRgNCw0LdcbiAqQHBhcmFtIGV2ZW50ICAg0YHQvtCx0YvRgtC40LUsINC+0LHRgNCw0LHQvtGC0YfQuNC6INC60L7RgtC+0YDQvtCz0L4g0L3QtdC+0LHRhdC+0LTQuNC80L4g0LTQvtCx0LDQstC40YLRjFxuICpAcGFyYW0gY2IgICAgICDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyBldmVudFxuICovXG5FdmVudEJ1cy5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGZ1bmN0aW9uIGZ1bmN0aW9uVG9PZmYoKSB7XG4gICAgICAgIGNiLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgICAgIHNlbGYub2ZmKGV2ZW50LCBmdW5jdGlvblRvT2ZmKTtcbiAgICB9O1xuXG4gICAgc2VsZi5vbihldmVudCwgZnVuY3Rpb25Ub09mZik7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEV2ZW50QnVzOyIsInZhciBsc1N0b3JhZ2UgPSB7XG4gICAgZ2V0RGF0YTogKGtleSkgPT4gUHJvbWlzZS5yZXNvbHZlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKSxcbiAgICBzZXREYXRhOiAoa2V5LCB2YWx1ZSkgPT4gUHJvbWlzZS5yZXNvbHZlKHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKSlcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGxzU3RvcmFnZTsiLCJmdW5jdGlvbiByZXF1ZXN0KHVybCkge1xuICAgIHJldHVybiAocmVxdWVzdC50eXBlID09PSAnWEhSJyA/IG1ha2VSZXF1ZXN0WEhSKHVybCkgOiBtYWtlUmVxdWVzdEZldGNoKHVybCkpXG59O1xuXG5yZXF1ZXN0LnR5cGUgPSAnWEhSJztcblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RGZXRjaCh1cmwpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsKVxuICAgICAgICAudGhlbigocmVxKSA9PiByZXEuanNvbigpKVxufTtcblxuZnVuY3Rpb24gbWFrZVJlcXVlc3RYSFIodXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShKU09OLnBhcnNlKHhoci5yZXNwb25zZSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdDsiLCIvKipcbiAqINCk0YPQvdC60YbQuNGPINC00LvRjyDQtNC+0LHQsNCy0LvQtdC90LjRjyDQuCDQvtCx0YDQsNCx0L7RgtC60Lgg0YDQvtGD0YLQvtCyINC90LAg0YHRgtGA0LDQvdC40YbQtVxuICogQHBhcmFtIHsqfSByb3V0ZVBhcmFtcyDQvNCw0YHRgdC40LIg0L/QsNGA0LDQvNC10YLRgNC+0LIg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuCDRgNC+0YPRgtC+0LJcbiAqL1xuZnVuY3Rpb24gUm91dGVyKHJvdXRlUGFyYW1zKSB7XG4gICAgdGhpcy5yb3V0ZXMgPSByb3V0ZVBhcmFtcyB8fCBbXTtcbiAgICB0aGlzLmN1cnJlbnRSb3V0ZTtcbiAgICB0aGlzLnByZXZpb3VzUm91dGU7XG4gICAgdGhpcy5jdXJyZW50UGFyYW1zO1xuICAgIHRoaXMucHJldmlvdXNQYXJhbXM7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy5oYW5kbGVyKHdpbmRvdy5sb2NhdGlvbi5oYXNoKTtcbiAgICB9KVxuICAgIHRoaXMuaGFuZGxlcih3aW5kb3cubG9jYXRpb24uaGFzaCk7XG59XG5cblJvdXRlci5wcm90b3R5cGUgPSB7XG4gICAgaGFuZGxlcjogZnVuY3Rpb24oaGFzaCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzUm91dGUgPSB0aGlzLmN1cnJlbnRSb3V0ZTtcbiAgICAgICAgdGhpcy5wcmV2aW91c1BhcmFtcyA9IHRoaXMuY3VycmVudFBhcmFtcztcbiAgICAgICAgdGhpcy5jdXJyZW50Um91dGUgPSB0aGlzLmZpbmROZXdSb3V0ZShoYXNoKTtcbiAgICAgICAgdGhpcy5sYXVuY2hIYW5kbGVycygpO1xuICAgIH0sXG4gICAgZmluZE5ld1JvdXRlOiBmdW5jdGlvbihoYXNoKSB7XG4gICAgICAgIGhhc2ggPSBoYXNoLnNsaWNlKDEpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gdGhpcy5yb3V0ZXNbaV07XG4gICAgICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnQubWF0Y2gpID09IFwic3RyaW5nXCIgJiYgZWxlbWVudC5tYXRjaCA9PT0gaGFzaCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZihlbGVtZW50Lm1hdGNoKSA9PSBcImZ1bmN0aW9uXCIgJiYgZWxlbWVudC5tYXRjaChoYXNoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcyA9ICcnO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChlbGVtZW50Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSAmJiBlbGVtZW50Lm1hdGNoLnRlc3QoaGFzaCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRQYXJhbXMgPSBoYXNoLm1hdGNoKGVsZW1lbnQubWF0Y2gpIHx8IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFBhcmFtcy5zcGxpY2UoMCwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGxhdW5jaEhhbmRsZXJzKCkge1xuICAgICAgICBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4geyB0aGlzLnByZXZpb3VzUm91dGUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUgJiYgdGhpcy5wcmV2aW91c1JvdXRlLm9uTGVhdmUodGhpcy5wcmV2aW91c1BhcmFtcykgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25CZWZvcmVFbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkJlZm9yZUVudGVyKHRoaXMuY3VycmVudFBhcmFtcykgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5jdXJyZW50Um91dGUgJiYgdGhpcy5jdXJyZW50Um91dGUub25FbnRlciAmJiB0aGlzLmN1cnJlbnRSb3V0ZS5vbkVudGVyKHRoaXMuY3VycmVudFBhcmFtcykgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSb3V0ZXI7IiwidmFyIHNreWNvbnMgPSBuZXcgU2t5Y29ucygpO1xuXG5mdW5jdGlvbiBzZXRJY29ucygpIHtcblxuICAgIHZhciBpY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2NhbnZhcycpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWNvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc2t5Y29ucy5hZGQoaWNvbnNbaV0sIFNreWNvbnNbaWNvbnNbaV0uY2xhc3NOYW1lLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIl9cIildKTtcbiAgICB9XG5cbiAgICBza3ljb25zLnBsYXkoKTtcbn07XG5zZXRJY29ucygpO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1cGRhdGVJY29ucygpIHtcbiAgICB2YXIgaWNvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdjYW52YXMnKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHNreWNvbnMuc2V0KGljb25zW2ldLCBTa3ljb25zW2ljb25zW2ldLmNsYXNzTmFtZS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLy0vZywgXCJfXCIpXSk7XG4gICAgfVxufSIsImltcG9ydCByZXF1ZXN0IGZyb20gJy4vcmVxdWVzdCc7XG5cbnZhciB1c2VyTG9jYXRpb24gPSByZXF1ZXN0KCdodHRwczovL2FwaS51c2VyaW5mby5pby91c2VyaW5mb3MnKS50aGVuKGRhdGEgPT4gZGF0YS5wb3NpdGlvbilcblxuXG5leHBvcnQgZGVmYXVsdCB1c2VyTG9jYXRpb247Il19
